<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Currency Price Widget</title>
    <style>
        body { font-family: Arial, margin: 0; padding: 10px; }
        h3 { margin-top: 0; }
        .price { font-weight: bold; color: #1565c0; }
    </style>
</head>
<body>
<h3>Курсы валют</h3>
<p>USD: <span class="price" id="usd">—</span> ₽</p>
<p>EUR: <span class="price" id="eur">—</span> ₽</p>
<p>GBP: <span class="price" id="gbp">—</span> ₽</p>
<p>JPY: <span class="price" id="jpy">—</span> ₽</p>

<script>
    async function updatePrices() {
        const currencies = ['USD', 'EUR', 'GBP', 'JPY'];
        for (const c of currencies) {
            const res = await fetch(`/check?currency=${c}&target=0&operation=buy`);
            const data = await res.json();
            document.getElementById(c.toLowerCase()).textContent = data.currentPrice.toFixed(4);
        }
    }
    updatePrices();
    setInterval(updatePrices, 30000);
</script>
</body>
</html>