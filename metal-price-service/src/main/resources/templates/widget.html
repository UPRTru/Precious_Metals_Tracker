<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Metal Price Widget</title>
    <style>
        body { font-family: Arial, margin: 0; padding: 10px; }
        h3 { margin-top: 0; }
        .price { font-weight: bold; color: #2e7d32; }
    </style>
</head>
<body>
<h3>Цены на драгоценные металлы</h3>
<p>Золото: <span class="price" id="gold">—</span> ₽/г</p>
<p>Серебро: <span class="price" id="silver">—</span> ₽/г</p>
<p>Платина: <span class="price" id="platinum">—</span> ₽/г</p>

<script>
    async function updatePrices() {
        const metals = ['GOLD', 'SILVER', 'PLATINUM'];
        for (const m of metals) {
            const res = await fetch(`/check?metal=${m}&target=0&operation=buy`);
            const data = await res.json();
            document.getElementById(m.toLowerCase()).textContent = data.currentPrice.toFixed(2);
        }
    }
    updatePrices();
    setInterval(updatePrices, 30000); // обновление каждые 30 сек
</script>
</body>
</html>